@model CorujaPresentation.Models.RegisterViewModel
@{
    ViewBag.Title = "Cadastro";
}

<!-- CADASTRO	================================= -->
<section id="Cadastro" class="section section-gray">

    <div class="container">

        <h2 class="section-heading text-center">Conta Coruja</h2>

        <div class="row centered-form">

            <div class="col-sm-8 col-sm-offset-2">

                <div class="panel panel-default">

                    <div id="cadTitle">

                        <h4>
                            <i class="glyphicon glyphicon-pencil">
                            </i>
                            Crie sua Conta Coruja
                        </h4>

                    </div>

                    <div id="cadBody" class="panel-body">

                        @using (Html.BeginForm("Cadastro", "Conta", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()


                            <div class="row">
                                <div class="col-sm-12">
                                    <span class="cadSubTitle">Dados Pessoais</span>
                                </div>
                            </div>

                            <div id="rowPessoais" class="row">

                                <div class="col-sm-12">
                                    
                                    <div class="form-group">
                                        @*Nome*@
                                        <div class="col-sm-6">
                                            @Html.LabelFor(m => m.FirstName, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.FirstName, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Nome" } })
                                        
                                            @Html.ValidationMessageFor(m => m.FirstName, "", new { @class = "text-danger" })
                                        </div>
                                        @*Sobrenome*@
                                        <div class="col-sm-6">
                                            @Html.LabelFor(m => m.LastName, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.LastName, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Sobrenome" } })
                                       
                                            @Html.ValidationMessageFor(m => m.LastName, "", new { @class = "text-danger" })
                                        </div>

                                    </div>

                                    <div class="form-group">
                                        @*DtNasc*@
                                        <div class="col-sm-6">
                                            @Html.LabelFor(m => m.BirthDate, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(model => model.BirthDate, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Data de Nascimento" } })

                                            @Html.ValidationMessageFor(model => model.BirthDate, "", new { @class = "text-danger" })
                                        </div>
                                        @*Escolaridade*@
                                        <div class="col-sm-6">
                                            @Html.LabelFor(m => m.Graduation, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.Graduation, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Graduação" } })

                                            @Html.ValidationMessageFor(m => m.Graduation, "", new { @class = "text-danger" })
                                        </div>

                                    </div>

                                    <div class="form-group">
                                        @*Celular*@
                                        <div class="col-sm-6">
                                            @Html.LabelFor(m => m.CellPhoneNumber, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.CellPhoneNumber, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Celular" } })
                                        </div>

                                        @*Tel Res.*@
                                        <div class="col-sm-6">
                                            @Html.LabelFor(m => m.PhoneNumber, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.PhoneNumber, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Telefone" } })
                                           
                                        </div>

                                    </div>

                                    <div class="form-group">
                                        @*Cpf*@
                                        <div class="col-sm-6">
                                            @Html.LabelFor(m => m.Cpf, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.Cpf, new { htmlAttributes = new { Id = "Cpf", @class = "form-control input-sm", placeholder = "CPF" } })
                                           
                                            @Html.ValidationMessageFor(m => m.Cpf, "", new { @class = "text-danger" })
                                        </div>

                                        @*RG*@
                                        <div class="col-sm-6">
                                            @Html.LabelFor(m => m.Rg, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.Rg, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "RG" } })

                                            @Html.ValidationMessageFor(m => m.Rg, "", new { @class = "text-danger" })
                                        </div>

                                    </div>

                                </div>
                             
                            </div>

                            @*=============================================================================*@

                            <div class="row">
                                <div class="col-sm-12">
                                    <h3>Endereço</h3>
                                </div>
                            </div>

                            <div class="row">

                                <div class="col-sm-12">

                                    <div class="form-group">

                                        @*CEP*@
                                        <div class="col-sm-4">
                                            @Html.LabelFor(m => m.Cep, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.Cep, new { htmlAttributes = new { Id = "Cep", @class = "form-control input-sm", placeholder = "CEP" } })
                                        </div>

                                    </div>

                                    <div class="form-group">
                                        @*ENDERECO*@
                                        <div class="col-sm-12">
                                            @Html.LabelFor(m => m.Address, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.Address, new { htmlAttributes = new { Id = "Address", @class = "form-control input-sm", placeholder = "Endereço" } })
                                            @Html.ValidationMessageFor(m => m.Address, "", new { @class = "text-danger" })
                                        </div>

                                     </div>

                                    <div class="form-group">
                                        @*Numero*@
                                        <div class="col-sm-3">
                                            @Html.LabelFor(m => m.AddressNumber, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.AddressNumber, new { htmlAttributes = new { Id = "AddressNumber", @class = "form-control input-sm", placeholder = "Número" } })
                                        </div>

                                        @*Complemento*@
                                        <div class="col-sm-7">
                                            @Html.LabelFor(m => m.AddressDetail, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.AddressDetail, new { htmlAttributes = new { Id = "AddressDetail", @class = "form-control input-sm", placeholder = "Complemento" } })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @*Bairro*@
                                        <div class="col-sm-5">
                                            @Html.LabelFor(m => m.Nhood, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.Nhood, new { htmlAttributes = new { Id = "Nhood", @class = "form-control input-sm", placeholder = "Bairro" } })
                                        </div>
                                        @*Cidade*@
                                        <div class="col-sm-5">
                                           @Html.LabelFor(m => m.City, new { htmlAttributes = new { @class = "" } })
                                           @Html.EditorFor(m => m.City, new { htmlAttributes = new { Id = "City", @class = "form-control input-sm", placeholder = "Cidade" } })
                                        </div>

                                        @*UF*@
                                        <div class="col-sm-2">
                                            @Html.LabelFor(m => m.State, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.State, new { htmlAttributes = new { Id = "State", @class = "form-control input-sm", placeholder = "Estado" } })
                                        </div>

                                    </div>


                                </div>

                            </div>

                            @*=============================================================================*@

                            <div class="row">
                                <div class="col-sm-12">
                                    <h3>Dados da Conta</h3>
                                </div>
                            </div>

                            <div class="row">

                                <div class="col-sm-12">
                        
                                    <div class="form-group">

                                        @*EMAIL*@
                                        <div class="col-sm-8">

                                            @Html.LabelFor(m => m.Email, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.Email, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Email" } })
                                            @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                                            <small><label class="checkbox-inline">@Html.CheckBox("ReceiveNewsletter", false) Receber Newsletter?</label></small>
                                        </div>
                                    </div>

                                </div>

                            </div>

                            <div class="row">

                                <div class="col-sm-12">

                                    <div class="form-group">
                                        <div class="col-sm-8">
                                            @Html.LabelFor(m => m.Password, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.Password, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Senha" } })
                                            @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-8">
                                            @Html.LabelFor(m => m.ConfirmPassword, new { htmlAttributes = new { @class = "" } })
                                            @Html.EditorFor(m => m.ConfirmPassword, new { htmlAttributes = new { @class = "form-control input-sm", placeholder = "Confirmar Senha" } })
                                            @Html.ValidationMessageFor(m => m.ConfirmPassword, "", new { @class = "text-danger" })
                                        </div>
                                   </div>

                                </div>

                            </div>

                  
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <div class="col-sm-8">
                                            <p>
                                                <button type="submit" class="btn btn-primary pull-right">Criar conta</button>
                                            </p>
                                      </div>
                                    </div>
                                </div>
                                </div>

                        }

                    </div>

                </div>

            </div>

        </div>


    </div>

</section>





@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/inputmask")


    <script type="text/javascript">

        $(document).ready(function () {

            function limpa_formulário_cep() {
                // Limpa valores do formulário de cep.
                $("#Address").val("");
                $("#Nhood").val("");
                $("#City").val("");
                $("#State").val("");
            }

            //Quando o campo cep perde o foco.
            $("#Cep").blur(function () {

                //Nova variável "cep" somente com dígitos.
                var cep = $(this).val().replace(/\D/g, '');

                //Verifica se campo cep possui valor informado.
                if (cep != "") {

                    //Expressão regular para validar o CEP.
                    var validacep = /^[0-9]{8}$/;

                    //Valida o formato do CEP.
                    if (validacep.test(cep)) {

                        //Preenche os campos com "..." enquanto consulta webservice.
                        $("#Address").val("...")
                        $("#Nhood").val("...")
                        $("#City").val("...")
                        $("#State").val("...")


                        //Consulta o webservice viacep.com.br/
                        $.getJSON("//viacep.com.br/ws/" + cep + "/json/?callback=?", function (dados) {

                            if (!("erro" in dados)) {
                                //Atualiza os campos com os valores da consulta.
                                $("#Address").val(dados.logradouro);
                                $("#Nhood").val(dados.bairro);
                                $("#City").val(dados.localidade);
                                $("#State").val(dados.uf);

                            } //end if.
                            else {
                                //CEP pesquisado não foi encontrado.
                                limpa_formulário_cep();
                                alert("CEP não encontrado.");
                            }
                        });
                    } //end if.
                    else {
                        //cep é inválido.
                        limpa_formulário_cep();
                        alert("Formato de CEP inválido.");
                    }
                } //end if.
                else {
                    //cep sem valor, limpa formulário.
                    limpa_formulário_cep();
                }
            });
        });

    </script>


}


